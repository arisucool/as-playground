<div class="toolbar-override">
  <button
    (click)="toggleAsobiLight()"
    mat-icon-button
    aria-label="アソビライト"
    [matTooltip]="
      isEnableAsobiLight ? 'アソビライトを表示' : 'アソビライトを隠す'
    "
  >
    <mat-icon>highlight</mat-icon>
  </button>

  <button
    (click)="setNoSleep(true)"
    *ngIf="!enableNoSleep"
    mat-icon-button
    aria-label="画面スリープを抑制する"
    matTooltip="画面スリープを抑制する"
  >
    <mat-icon>lock_open</mat-icon>
  </button>
  <button
    (click)="setNoSleep(false)"
    *ngIf="enableNoSleep"
    mat-icon-button
    aria-label="画面スリープの抑制を解除する"
    matTooltip="画面スリープの抑制を解除する"
  >
    <mat-icon>lock</mat-icon>
  </button>
</div>

<div class="content">
  <div class="status">
    <ng-container *ngIf="!errorText && !peer">
      <p>初期化中...</p>
    </ng-container>
    <ng-container *ngIf="!errorText && peer && !dataConnection">
      <p>ホストへ接続しています...</p>
    </ng-container>
    <ng-container
      *ngIf="!errorText && peer && dataConnection && comments.length == 0"
    >
      <p>新着コメントを待機しています...</p>
    </ng-container>
    <ng-container *ngIf="errorText">
      <p>
        <mat-icon style="color: #f1c40f">warning</mat-icon>
      </p>
      <p>エラー</p>
      <p class="detail">
        {{ errorText }}
      </p>
    </ng-container>
  </div>

  <div class="comments-container" [ngClass]="{ half: isEnableAsobiLight }">
    <mat-list class="comments">
      <mat-list-item *ngFor="let comment of comments.slice().reverse()">
        <h3 matLine [style.color]="comment.nicknameColor">
          {{ comment.nickname }}
        </h3>
        <p matLine>
          <span> {{ comment.comment }} </span>
        </p>
      </mat-list-item>
    </mat-list>
  </div>

  <iframe
    class="asobi-light-frame"
    *ngIf="asobiLightUrl && isEnableAsobiLight"
    [src]="asobiLightUrl"
  >
  </iframe>
</div>
